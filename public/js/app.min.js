"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};$(document).ready(function(){var n=null;$(".text-success").fadeOut(1800,function(){}),$("#save-note-modal").on("hidden.bs.modal",function(e){$("#result-msg").remove(),$("#new-note-text").show(),$(".save-note").show()}),$(".create-note, .view-note").on("click",function(){n=$(this).attr("data-id")}),$("#scrape").on("click",function(){$(".article-container").empty(),$(".article-container").append('<div class="loader"></div>'),$.getJSON("/scrape",function(e){var t;$(".article-container").empty(),t=e,$(".saved-articles").empty(),$(".none").remove(),t.forEach(function(e){var t=$('\n        <div class="row article my-5 pb-4">\n          <div class="col-sm-5 mb-3 mb-sm-3">\n            <a href="'+e.link+'" target="_blank">\n              <img class="img-fluid" src="'+e.img+'">\n            </a>\n          </div>\n          <div class="col-sm-7 border-bottom border-secondary pb-3 pb-sm-3">\n            <h3 class="mb-2">\n              <a href="'+e.link+'" target="_blank">'+e.title+'</a> \n            </h3>\n            <p class="mb-2">'+e.excerpt+'</p>\n            <button type="button" class="btn save-article" data-id="'+e._id+'">Save Article</button>\n          </div>\n        </div>\n      ');$(".article-container").append(t)})})}),$(document).on("click",".save-article",function(){var t=$(this);$.post("/saveArticle",{id:$(this).attr("data-id")},function(e){$('<p class="text-success mt-2">'+e+"</p>").insertAfter(t),t.remove()})}),$(".remove-article").on("click",function(){var t=$(this);$.ajax({url:"/removeArticle",data:{id:$(this).attr("data-id")},type:"DELETE",success:function(e){t.closest(".article").remove(),$(".saved-articles").children().length<1&&($(".article-container").empty(),$(".article-container").append($('<h2 class="text-center none">No Articles!</h2>')))}})}),$(".save-note").on("click",function(e){e.preventDefault(),$.post("/saveNote",{body:$("#new-note-text").val().trim(),articleId:n},function(e){$("#new-note-text").val(""),$("#new-note-text").hide(),$(".form-group").append('<h3 id="result-msg">'+e+"</h3>"),$(".save-note").hide()})}),$(".view-note").on("click",function(){$("#all-article-notes").empty(),$("#all-article-notes").append('<div class="loader"></div>'),$.post("/getArticleNotes",{articleId:$(this).attr("data-id")},function(e){if("object"===(void 0===e?"undefined":_typeof(e))){var n=e.username;e=e.result;$(".loader").remove(),e.length<1&&$("#all-article-notes").append($("<h3>No Notes</h3>")),e.forEach(function(e){var t=$('\n            <div class="mb-2 note-container">\n              <span><span class="text-muted">'+e.username+":</span> "+e.body+"</span>\n            </div>\n          ");n===e.username&&t.append($('\n              <button type="button" class="close delete-note" aria-label="Close" data-id="'+e._id+'">\n                <span aria-hidden="true"  \n                  style="padding: 0 7px; color: white; background-color: #f44336">\n                    Ã—\n                </span>\n              </button>\n              ')),$("#all-article-notes").append(t)})}else $("#all-article-notes").append(e)})}),$(document).on("click",".delete-note",function(){var t=$(this);$.post("/removeNote",{noteId:$(this).attr("data-id"),articleId:n},function(e){"success"===e?(t.closest(".note-container").remove(),$("#all-article-notes").children().length<1&&$("#all-article-notes").append($("<h3>No Notes</h3>"))):console.log(e)})})});